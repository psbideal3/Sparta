<head>
    <title>챔피언 정보</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <style>
        .mainImage {
            background-image: url('https://www.leagueoflegends.co.kr/upload/cms/201503/env_vista1.jpg');
            background-size: cover;
            background-position: center;
            background-position: no-repeat;
            width: 100%;
            height: 100%;
        }

        #reSize {
            width: 600px;
            margin: 0 auto;
        }

        .wrap {
            text-align: center;
            margin: 0 auto;
        }

        .blank {
            height: 20px;
        }
    </style>

    <script>

        $(document).ready(function () {
            $('#masterList').html('');
            searchChampion();
        });

        function searchChampion() {
            let championName = decodeURI(window.location.href.split("?")[1].split("=")[1])
            $.ajax({
                type: "GET",
                url: "/searchMaster?champName=" + championName,
                data: {},
                success: function (response) {
                    masterName = response["showResult"]
                    masterTier = response["showTier"]
                    appendMaster()
                }
            })

        }

        function appendMaster() {
            //api에서 가져온 닉네임을 자동으로 올린다.
            for (let i = 0; i < masterName.length; i++) {
                let tempHtml = '<button class="list-group-item list-group-item-action" id=' + i + ' type="button" onclick="window.location.href = "https://www.op.gg/summoner/userName=' + masterName[i] + ';">' + (i+1) + ".   " + masterName[i] + '<span> ' + "[" + masterTier[i] + "]" + '</span></button>'
                $('#masterList').append(tempHtml);
            }
        }

        function bringRune(n) {
            master = $('#' + n + '').text()
            // $.ajax({
            //     type: "GET",
            //     url: "/getRune?masterRune=" + master,
            //     data: {},
            //     success: function (response) {

            //     }
            // })
            window.location.href('https://www.op.gg/summoner/userName=' + master)

        }
    </script>
</head>

<body>
    <div class="blank">
    </div>
    <h1 class="wrap">장인 랭킹</h1>
    <div class="blank">
    </div>
    <div id="resize">
        <div class="list-group" id="masterList">
            <button class="list-group-item list-group-item-action" id="0" type="button" onclick="bringRune()">소환사
                이름</button>
        </div>
    </div>

</body>